--
-- DataSnap 세미나용 데이터베이스
--
-- (c)copyright in 2025 by 시골프로그래머
--


--
-- 사용자 마스터
--
DROP TABLE IF EXISTS USRS;
CREATE TABLE USRS (
	SEQ INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '일련번호',
	USR_ID VARCHAR(12) NOT NULL COMMENT '사용자 아이디',
	USR_PW VARCHAR(64) NOT NULL COMMENT '접속 비밀번호',
	USR_NM VARCHAR(20) NOT NULL COMMENT '사용자 성명',
	USR_LVL INTEGER NOT NULL DEFAULT 0 COMMENT '사용자 등급',
	LGN_CNT INTEGER DEFAULT 0 COMMENT '로그인 횟수',
	LGN_FAIL_CNT INTEGER DEFAULT 0 COMMENT '로그인 실패횟수',
	LST_LOGIN_DT DATETIME COMMENT '최종 로그인 일시',
	LST_LOGIN_IP VARCHAR(15) COMMENT '최종 로그인 아이피',
	LST_LOGOUT_DT DATETIME COMMENT '최종 로그아웃 일시',
	USE_YN VARCHAR(1) DEFAULT 'N' COMMENT '삭제 여부',
	CRT_ID VARCHAR(20) DEFAULT 'SYSTEM' COMMENT '생성자 아이디',
	CRT_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP() COMMENT '생성일시',
	CRT_IP VARCHAR(15) COMMENT '생성자 아이피',
	MOD_ID VARCHAR(20) COMMENT '수정자 아이디',
	MOD_DT TIMESTAMP ON UPDATE CURRENT_TIMESTAMP() COMMENT '수정일시',
	MOD_IP VARCHAR(15) COMMENT '수정자 아이피'
);
CREATE INDEX IDX_USRS_USER_ID ON USRS(USR_ID);

--
-- 로그인 히스토리
--
CREATE TABLE LGNHIST (
	SEQ INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '일련번호',
	USR_ID VARCHAR(12) NOT NULL COMMENT '사용자 아이디',
	LGN_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP() COMMENT '로그인 일시',
	LGN_IP VARCHAR(15) COMMENT '로그인 아이피',
	LGN_RSLT INTEGER DEFAULT 0 COMMENT '로그인 결과 (0:정상, 1:아이디 없음, 2: 비밀번호 오류, 9: 계정잠김)'
);

CREATE INDEX IDX_LGNHIST_USER_ID ON LGNHIST(USER_ID);
CREATE INDEX IDX_LGNHIST_LGN_DT ON LGNHIST(LGN_DT);

--
-- 공지사항
--
CREATE TABLE NOTICE (
	SEQ INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '일련번호',
	TITLE VARCHAR(200) NOT NULL COMMENT '제목',
	CONTENT TEXT COMMENT '내용',
	READED INTEGER DEFAULT 0 COMMENT '읽음',
);

--
--
--
CREATE TABLE QUOTES (
	SEQ INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '일련번호',
	QT_NO VARCHAR(12) NOT NULL COMMENT '견적번호',

);


















INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('ADMIN',  '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '관리자', 99);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER01', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자01', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER02', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자02', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER03', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자03', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER04', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자04', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER05', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자05', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER06', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자06', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER07', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자07', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER08', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자08', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER09', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자09', 01);
INSERT INTO USRS (USR_ID, USR_PW, USR_NM, USR_LVL) VALUES ('USER10', '013750e1626a690686d50cc79fa0de134a776ed8a77c080df35220b59e1eeb3e', '사용자10', 01);
